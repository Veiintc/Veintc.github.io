<!DOCTYPE html>
<html >
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=0.7, minimum-scale=0.7, maximum-scale=0.7, user-scalable=no" >  
<title>主页测试</title>
<script src="https://cdn.bootcss.com/jquery/1.11.3/jquery.js"></script>

</head>
<body>
<canvas id="demo-canvas" width="2420" height="979"></canvas>
<script>
(function () {
	var width, height, largeHeader, canvas, ctx, circles, target, animateHeader = true;
	initHeader();
	addListeners();
	function initHeader() {
		width = window.innerWidth + 500;
		height = window.innerHeight;
		target = { x: 0, y: height };
		canvas = document.getElementById('demo-canvas');
		canvas.width = width;
		canvas.height = height;
		ctx = canvas.getContext('2d');
		circles = [];
		for (var x = 0; x < width * 0.5; x++) {
			var c = new Circle();
			circles.push(c);
		}
		animate();
	}
	function addListeners() {
		window.addEventListener('scroll', scrollCheck);
		window.addEventListener('resize', resize);
	}
	function resize() {
		width = window.innerWidth + 100;
		height = window.innerHeight;
		canvas.width = width;
		canvas.height = height;
	}
	function animate() {
		if (animateHeader) {
			ctx.clearRect(0, 0, width, height);
			for (var i in circles) {
				circles[i].draw();
			}
		}
		requestAnimationFrame(animate);
	}
	function Circle() {
		var _this = this;
		(function () {
			_this.pos = {};
			init();
			console.log(_this);
		})();
		function init() {
			_this.pos.x = Math.random() * width;
			_this.pos.y = height + Math.random() * 100;
			_this.alpha = 0.1 + Math.random() * 0.3;
			_this.scale = 0.1 + Math.random() * 0.3;
			_this.velocity = Math.random();
		}
		this.draw = function () {
			if (_this.alpha <= 0) { init(); }
			_this.pos.y -= _this.velocity;
			_this.alpha -= 0.0005;
			ctx.beginPath();
			ctx.arc(_this.pos.x, _this.pos.y, _this.scale * 10, 0, 2 * Math.PI, false);
			ctx.fillStyle = 'rgba(255,255,255,' + _this.alpha + ')'; ctx.fill();
		};
	}
})();
</script>
<script>
document.addEventListener('visibilitychange',function(){
if(document.visibilityState=='hidden') {
normal_title=document.title;
document.title='(づ￣ 3￣)づ';
}
else
document.title=normal_title;
});
</script>

</body>
</html>
